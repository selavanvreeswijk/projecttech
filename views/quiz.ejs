<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Quiz</title>
        <link rel="stylesheet" href="/style.css">

        <%- include('partials/header') %>

        <style>
            main{
                display: flex;
                flex-direction: column;
                text-align: center;
            }


            button{
                background: var(--color-background-inputfield);

                border: 0.09em solid var(--color-lines);
                border-radius: 0.8em;

                width: 40%;
                padding: 0.3em 0.9em;
            }


            section{
                display: none;
            }


            .begin{
                margin: 10em 2em;
            }


            .begin button{
                margin-top: 2em;
            }


            h2{
                margin: 1em;
            }


            .nav-buttons{
                display: none;

                margin-top: 2.5em;
            }
        </style>
    </head>

    <body>
        <main>
            <h1>Quiz</h1>

            <div class="begin">
                <p>
                    Got 30 seconds? Get matched to your perfect plant! 
                </p>
    
                <button>Begin</button>
            </div>

            <section>
                <h2 id="question-text"></h2> <!--Nog kijken hoe ik dit lowercase maak-->
                <input type="range" id="progress" min="0" max="100" value="50" oninput="saveAnswer(this.value)">    
            </section>
 
            <div class="nav-buttons">
                <button onclick="prevQuestion()">Previous</button>
                <button onclick="nextQuestion()">Next</button>
            </div>
        </main>
       
        <footer>
            <%- include('partials/footer') %>
        </footer>

        <script>
            const begin = document.querySelector('.begin')
            const beginButton = document.querySelector('.begin button')
            const questionAndAnswer = document.querySelector('section')
            const navButtons = document.querySelector('.nav-buttons')

            beginButton.addEventListener('click', function(){
                begin.style.display = 'none';

                questionAndAnswer.style.display = 'block';
                navButtons.style.display = 'block';
            })

            let currentQuestionIndex = 0;
            let answers = {};

            // Vragen
            const questions = [
                { id: 1, text: "How much of an plant-expert are you?" },
                { id: 2, text: "Do you currently own plants?" },
                { id: 3, text: "How much time would you like to invest in plants?" },
                { id: 4, text: "How much money would you like to invest in plants?" },
                { id: 5, text: "How big do you want your plant to be?" },
            ]

            // Laad een vraag
            function loadQuestion() {
                document.getElementById("question-text").innerText = questions[currentQuestionIndex].text;
                document.getElementById("progress").value = answers[questions[currentQuestionIndex].id] || 50;
            }

            // Opslaan van antwoord
            function saveAnswer(value) {
                answers[questions[currentQuestionIndex].id] = value;
                fetch('/save-answer', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ questionId: questions[currentQuestionIndex].id, answer: value })
                }).catch(err => console.error(err));
            }

            // Volgende vraag
            function nextQuestion() {
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                }
            }

            // Vorige vraag
            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    loadQuestion();
                }
            }

            window.onload = () => {
                loadQuestion();
            };
        </script>
    </body>
</html>



